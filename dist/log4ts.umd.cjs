(function(i,n){typeof exports=="object"&&typeof module<"u"?n(exports):typeof define=="function"&&define.amd?define(["exports"],n):(i=typeof globalThis<"u"?globalThis:i||self,n(i.log4ts={}))})(this,function(i){"use strict";var P=Object.defineProperty;var x=(i,n,u)=>n in i?P(i,n,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[n]=u;var f=(i,n,u)=>(x(i,typeof n!="symbol"?n+"":n,u),u);var n=(o=>(o[o.All=0]="All",o[o.Debug=1]="Debug",o[o.Info=2]="Info",o[o.Warning=3]="Warning",o[o.Error=4]="Error",o[o.Off=5]="Off",o))(n||{});const u=["ALL","DEBUG","INFO","WARN","ERROR","OFF"];class Y{constructor(e,t=[]){f(this,"layout");f(this,"filters");this.layout=e,this.filters=t}append(e,t){const r=this.layout.render(e);let s=!0;for(const c of this.filters)if(s=c.filter(e,t),!s)break;if(s)switch(e.level){case n.Debug:console.debug(...r);break;case n.Info:console.info(...r);break;case n.Warning:console.warn(...r);break;case n.Error:console.error(...r);break}}}const g="YYYY-MM-DDTHH:mm:ss.SSS";class b{constructor(e=g){f(this,"pattern");this.pattern=e}format(e=new Date){let t=this.pattern+"";return t=t.replace("YYYY",this.formatYear(e,4)),t=t.replace("YY",this.formatYear(e,2)),t=t.replace("Y",this.formatYear(e)),t=t.replace("MM",this.formatMonth(e,2)),t=t.replace("M",this.formatMonth(e)),t=t.replace("DD",this.formatDay(e,2)),t=t.replace("D",this.formatDay(e)),t=t.replace("HH",this.formatHour(e,2)),t=t.replace("H",this.formatHour(e)),t=t.replace("mm",this.formatMinute(e,2)),t=t.replace("m",this.formatMinute(e)),t=t.replace("ss",this.formatSecond(e,2)),t=t.replace("s",this.formatSecond(e)),t=t.replace("SSS",this.formatMillisecond(e,3)),t=t.replace("SS",this.formatMillisecond(e,2)),t=t.replace("S",this.formatMillisecond(e,1)),t}formatYear(e,t=0){const r=e.getFullYear(),s=r%100;switch(t){case 4:return`${r}`.padStart(4,"0");case 2:return`${s}`.padStart(2,"0")}return`${r}`}formatMonth(e,t=0){const r=e.getMonth()+1;return t==2?`${r}`.padStart(2,"0"):`${r}`}formatDay(e,t=0){const r=e.getDay();return t==2?`${r}`.padStart(2,"0"):`${r}`}formatHour(e,t=0){const r=e.getHours();return t==2?`${r}`.padStart(2,"0"):`${r}`}formatMinute(e,t=0){const r=e.getMinutes();return t==2?`${r}`.padStart(2,"0"):`${r}`}formatSecond(e,t=0){const r=e.getSeconds();return t==2?`${r}`.padStart(2,"0"):`${r}`}formatMillisecond(e,t=0){const r=e.getMilliseconds(),s=Math.floor(r/10),c=Math.floor(r/100);switch(t){case 3:return`${r}`.padStart(3,"0");case 2:return`${s}`.padStart(2,"0");case 1:return`${c}`}return"0"}}const $="%d{YYYY-MM-DD HH:mm:ss.SSS} [%-5l] {%24n} ",S=/%d(\{(.*?)})?/,M=/%([+-]?\d+)?l/,E=/%([+-]?\d+)?n/;class w{constructor(e=$){f(this,"pattern");this.pattern=e}renderPrefix(e,t,r){let s=this.pattern+"",c=S.exec(s);if(c!=null){const a=c[2]??g,l=new b(a).format(e);s=s.replace(S,l)}if(c=M.exec(s),c!=null){let a=u[t];const d=c[1]??"0",l=Number(d),p=Math.abs(l);l>0?a=a.padEnd(p," "):l<0&&(a=a.padStart(p," ")),s=s.replace(M,a)}if(c=E.exec(s),c!=null){let a=r;const d=c[1]??"0",l=Number(d),p=Math.abs(l);if(p>a.length)l>0?a=a.padEnd(p,""):l<0&&(a=a.padStart(p," "));else if(p<a.length){const F=a.substring(0,p-3-3),R=a.substring(a.length-3);a=`${F}...${R}`}s=s.replace(E,a)}return s}render(e){const t=[];return t.push(this.renderPrefix(e.time,e.level,e.name)),t.push(...e.message),t}}const y=new w;class A{constructor(){}filter(e,t){return e.level>=t.level}}const T=new A,H=new Y(y,[T]),N="ROOT",O=n.Info;class D{constructor(e=N,t={}){f(this,"name");f(this,"level",O);f(this,"appenders",[]);this.name=e,t.level!=null&&(this.level=t.level),t.appenders!=null&&(this.appenders=t.appenders),this.appenders.length==0&&this.appenders.push(H)}debug(...e){this.append(n.Debug,...e)}info(...e){this.append(n.Info,...e)}warn(...e){this.append(n.Warning,...e)}error(...e){this.append(n.Error,...e)}append(e,...t){const r={time:new Date,level:e,name:this.name,message:t};for(const s of this.appenders)s.append(r,this)}}const h=class h{static getLogger(e){if(h.loggers.has(e))return h.loggers.get(e);const t=new D(e);return h.loggers.set(e,t),t}};f(h,"loggers",new Map);let m=h;i.Logger=D,i.LoggerFactory=m,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
